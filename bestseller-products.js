/**
 * Amazon売れ筋商品データベース（画像ID付き）
 * 2025年1月時点の人気商品
 */

window.BESTSELLER_PRODUCTS = {
    // キッチン用洗剤（売れ筋順）
    kitchen_cleaners: [
        {
            asin: "B07C44DM6S",
            name: "花王 キュキュット クリア除菌 本体 240ml",
            imageId: "61XYX+0xXiL",
            price: "¥198",
            rating: 4.4,
            reviews: 5432,
            rank: 1,
            emoji: "🧴",
            badge: "🥇 売れ筋No.1",
            url: "https://www.amazon.co.jp/dp/B07C44DM6S?tag=asdfghj12-22"
        },
        {
            asin: "B002E1AU3A",
            name: "ライオン チャーミーマジカ 酵素+ 本体 220ml",
            imageId: "41L3qQHGJLL",
            price: "¥178",
            rating: 4.3,
            reviews: 4321,
            rank: 2,
            emoji: "🍋",
            badge: "🥈 売れ筋No.2",
            url: "https://www.amazon.co.jp/dp/B002E1AU3A?tag=asdfghj12-22"
        },
        {
            asin: "B07QN4M52D",
            name: "P&G ジョイ コンパクト 本体 190ml",
            imageId: "31bAL9DPBGL",
            price: "¥158",
            rating: 4.2,
            reviews: 3987,
            rank: 3,
            emoji: "💚",
            badge: "🥉 売れ筋No.3",
            url: "https://www.amazon.co.jp/dp/B07QN4M52D?tag=asdfghj12-22"
        },
        {
            asin: "B08KQ5F7MN",
            name: "花王 マジックリン キッチン用 本体 400ml",
            imageId: "71HGG5oTQqL",
            price: "¥298",
            rating: 4.5,
            reviews: 2876,
            rank: 4,
            emoji: "✨",
            badge: "⭐ 高評価",
            url: "https://www.amazon.co.jp/dp/B08KQ5F7MN?tag=asdfghj12-22"
        }
    ],

    // カビ取り剤（売れ筋順）
    bathroom_mold: [
        {
            asin: "B0012R4V2S",
            name: "ジョンソン カビキラー 本体 400g",
            imageId: "51xQx5W3veL",
            price: "¥328",
            rating: 4.3,
            reviews: 8765,
            rank: 1,
            emoji: "🦠",
            badge: "🥇 カビ取りNo.1",
            url: "https://www.amazon.co.jp/dp/B0012R4V2S?tag=asdfghj12-22"
        },
        {
            asin: "B07S2J294T",
            name: "花王 強力カビハイター 本体 400ml",
            imageId: "71K2XLMNFTL",
            price: "¥348",
            rating: 4.4,
            reviews: 6543,
            rank: 2,
            emoji: "💪",
            badge: "🥈 強力タイプ",
            url: "https://www.amazon.co.jp/dp/B07S2J294T?tag=asdfghj12-22"
        },
        {
            asin: "B08P5KLM3N",
            name: "激落ちくん カビ取りジェル 100g",
            imageId: "61PqQFmOjzL",
            price: "¥498",
            rating: 4.5,
            reviews: 3210,
            rank: 3,
            emoji: "🧪",
            badge: "🥉 ジェルタイプ",
            url: "https://www.amazon.co.jp/dp/B08P5KLM3N?tag=asdfghj12-22"
        },
        {
            asin: "B09KQR8MNP",
            name: "ルック おふろの防カビくん煙剤 5g×3個",
            imageId: "71YZQxLMNPL",
            price: "¥798",
            rating: 4.2,
            reviews: 2109,
            rank: 4,
            emoji: "🌫️",
            badge: "⭐ 予防効果",
            url: "https://www.amazon.co.jp/dp/B09KQR8MNP?tag=asdfghj12-22"
        }
    ],

    // 水垢取り（売れ筋順）
    scale_removers: [
        {
            asin: "B07KLM5678",
            name: "茂木和哉 水垢洗剤 200ml",
            imageId: "51N3Q2MNOXL",
            price: "¥1,780",
            rating: 4.6,
            reviews: 4567,
            rank: 1,
            emoji: "💎",
            badge: "🥇 プロ仕様",
            url: "https://www.amazon.co.jp/dp/B07KLM5678?tag=asdfghj12-22"
        },
        {
            asin: "B08NOP9012",
            name: "クエン酸の激落ちくん 粉末タイプ 400g",
            imageId: "81QRS3MNFTL",
            price: "¥398",
            rating: 4.3,
            reviews: 3456,
            rank: 2,
            emoji: "🍋",
            badge: "🥈 天然成分",
            url: "https://www.amazon.co.jp/dp/B08NOP9012?tag=asdfghj12-22"
        },
        {
            asin: "B01QRS3456",
            name: "ダイヤモンドパッド S 鏡・ガラス用",
            imageId: "61TUV2MNOXL",
            price: "¥698",
            rating: 4.4,
            reviews: 2345,
            rank: 3,
            emoji: "✨",
            badge: "🥉 研磨タイプ",
            url: "https://www.amazon.co.jp/dp/B01QRS3456?tag=asdfghj12-22"
        },
        {
            asin: "B09LMN7890",
            name: "ウタマロクリーナー 400ml",
            imageId: "71WXYZ3MNOL",
            price: "¥398",
            rating: 4.5,
            reviews: 5678,
            rank: 4,
            emoji: "🧽",
            badge: "⭐ 万能タイプ",
            url: "https://www.amazon.co.jp/dp/B09LMN7890?tag=asdfghj12-22"
        }
    ],

    // トイレ用洗剤（売れ筋順）
    toilet_cleaners: [
        {
            asin: "B0019R4QX2",
            name: "花王 トイレマジックリン 消臭・洗浄スプレー 本体 380ml",
            imageId: "61ABC4MNOXL",
            price: "¥248",
            rating: 4.3,
            reviews: 6789,
            rank: 1,
            emoji: "🚽",
            badge: "🥇 トイレNo.1",
            url: "https://www.amazon.co.jp/dp/B0019R4QX2?tag=asdfghj12-22"
        },
        {
            asin: "B07YHL4567",
            name: "サンポール トイレ洗剤 500ml",
            imageId: "71DEF5MNOXL",
            price: "¥198",
            rating: 4.4,
            reviews: 5432,
            rank: 2,
            emoji: "💪",
            badge: "🥈 尿石に強い",
            url: "https://www.amazon.co.jp/dp/B07YHL4567?tag=asdfghj12-22"
        },
        {
            asin: "B08YTR8901",
            name: "スクラビングバブル 超強力トイレクリーナー 400g",
            imageId: "81GHI6MNOXL",
            price: "¥328",
            rating: 4.5,
            reviews: 4321,
            rank: 3,
            emoji: "🫧",
            badge: "🥉 泡タイプ",
            url: "https://www.amazon.co.jp/dp/B08YTR8901?tag=asdfghj12-22"
        },
        {
            asin: "B09WXY2345",
            name: "ドメスト 除菌クリーナー 500ml",
            imageId: "91JKL7MNOXL",
            price: "¥278",
            rating: 4.2,
            reviews: 3210,
            rank: 4,
            emoji: "🦠",
            badge: "⭐ 除菌効果",
            url: "https://www.amazon.co.jp/dp/B09WXY2345?tag=asdfghj12-22"
        }
    ],

    // フロア掃除（売れ筋順）  
    floor_cleaners: [
        {
            asin: "B01N05Y41E",
            name: "花王 クイックルワイパー 立体吸着ウエットシート 16枚",
            imageId: "51A7Y5QXHPL",
            price: "¥398",
            rating: 4.5,
            reviews: 9876,
            rank: 1,
            emoji: "🧹",
            badge: "🥇 床掃除No.1",
            url: "https://www.amazon.co.jp/dp/B01N05Y41E?tag=asdfghj12-22"
        },
        {
            asin: "B005335D9S",
            name: "リンレイ オール床クリーナー 500ml",
            imageId: "71MNO8MNOXL",
            price: "¥498",
            rating: 4.3,
            reviews: 4567,
            rank: 2,
            emoji: "✨",
            badge: "🥈 プロ仕様",
            url: "https://www.amazon.co.jp/dp/B005335D9S?tag=asdfghj12-22"
        },
        {
            asin: "B005AILJ3O",
            name: "クイックルワイパー フロア用掃除道具 本体+2種類シートセット",
            imageId: "81PQR9MNOXL",
            price: "¥1,280",
            rating: 4.4,
            reviews: 7654,
            rank: 3,
            emoji: "🧽",
            badge: "🥉 セット商品",
            url: "https://www.amazon.co.jp/dp/B005AILJ3O?tag=asdfghj12-22"
        },
        {
            asin: "B00OOCWP44",
            name: "激落ちくん メラミンスポンジ 30個入",
            imageId: "91STU0MNOXL",
            price: "¥298",
            rating: 4.6,
            reviews: 12345,
            rank: 4,
            emoji: "🧽",
            badge: "⭐ コスパ最強",
            url: "https://www.amazon.co.jp/dp/B00OOCWP44?tag=asdfghj12-22"
        }
    ],

    // 掃除道具・ツール（売れ筋順）
    cleaning_tools: [
        {
            asin: "B073C4QRLS",
            name: "ショーワグローブ ナイスハンド さらっとタッチ Mサイズ",
            imageId: "61VWX1MNOXL",
            price: "¥298",
            rating: 4.4,
            reviews: 6543,
            rank: 1,
            emoji: "🧤",
            badge: "🥇 手袋No.1",
            url: "https://www.amazon.co.jp/dp/B073C4QRLS?tag=asdfghj12-22"
        },
        {
            asin: "B07BQFJ5K9",
            name: "山崎産業 ユニットバスボンくん ハンディ",
            imageId: "71YZ12MNOXL",
            price: "¥698",
            rating: 4.3,
            reviews: 4321,
            rank: 2,
            emoji: "🪥",
            badge: "🥈 お風呂掃除",
            url: "https://www.amazon.co.jp/dp/B07BQFJ5K9?tag=asdfghj12-22"
        },
        {
            asin: "B01KLM2345",
            name: "マーナ おさかなスポンジ 2個セット",
            imageId: "81ABC3MNOXL",
            price: "¥398",
            rating: 4.5,
            reviews: 5432,
            rank: 3,
            emoji: "🐟",
            badge: "🥉 人気デザイン",
            url: "https://www.amazon.co.jp/dp/B01KLM2345?tag=asdfghj12-22"
        },
        {
            asin: "B08BCD3456",
            name: "アズマ工業 浴室掃除スポンジ 抗菌タイプ",
            imageId: "91DEF4MNOXL",
            price: "¥498",
            rating: 4.2,
            reviews: 3210,
            rank: 4,
            emoji: "🧽",
            badge: "⭐ 抗菌仕様",
            url: "https://www.amazon.co.jp/dp/B08BCD3456?tag=asdfghj12-22"
        }
    ]
};

// 掃除箇所別のおすすめ商品を取得する関数
window.getBestsellerProducts = function(location, dirtType) {
    let products = [];
    
    // 場所と汚れタイプに応じて最適な商品カテゴリを選択
    if (location === 'kitchen' || dirtType.includes('油') || dirtType.includes('キッチン')) {
        products = window.BESTSELLER_PRODUCTS.kitchen_cleaners;
    } else if (location === 'bathroom') {
        // 浴室の場合、汚れタイプによって商品を選択
        if (dirtType.includes('カビ')) {
            products = window.BESTSELLER_PRODUCTS.bathroom_mold;
        } else if (dirtType.includes('水垢') || dirtType.includes('ウロコ')) {
            // 水垢の場合は水垢取り商品を優先、カビ取りも追加
            products = [
                ...window.BESTSELLER_PRODUCTS.scale_removers.slice(0, 2),
                ...window.BESTSELLER_PRODUCTS.bathroom_mold.slice(0, 2)
            ];
        } else if (dirtType.includes('ヌメリ') || dirtType.includes('排水')) {
            // 排水口の場合はカビ取りとパイプクリーナーを混合
            products = [
                window.BESTSELLER_PRODUCTS.bathroom_mold[0], // カビキラー
                {
                    asin: "B00FRGVVHU",
                    name: "パイプユニッシュ プロ 濃縮液体タイプ 400g",
                    imageId: "61PIPE1MNOXL",
                    price: "¥298",
                    rating: 4.3,
                    reviews: 3456,
                    rank: 1,
                    emoji: "🚿",
                    badge: "🥇 排水口No.1",
                    url: "https://www.amazon.co.jp/dp/B00FRGVVHU?tag=asdfghj12-22"
                },
                window.BESTSELLER_PRODUCTS.bathroom_mold[1],
                window.BESTSELLER_PRODUCTS.cleaning_tools[0] // ゴム手袋
            ];
        } else {
            // その他の浴室掃除
            products = [
                ...window.BESTSELLER_PRODUCTS.bathroom_mold.slice(0, 2),
                ...window.BESTSELLER_PRODUCTS.scale_removers.slice(0, 2)
            ];
        }
    } else if (dirtType.includes('水垢') || dirtType.includes('ウロコ')) {
        products = window.BESTSELLER_PRODUCTS.scale_removers;
    } else if (location === 'toilet' || dirtType.includes('トイレ') || dirtType.includes('尿石')) {
        products = window.BESTSELLER_PRODUCTS.toilet_cleaners;
    } else if (location === 'floor' || dirtType.includes('床') || dirtType.includes('フローリング')) {
        // 床の場合、汚れタイプに応じて商品を選択
        if (dirtType.includes('ホコリ')) {
            products = window.BESTSELLER_PRODUCTS.floor_cleaners;
        } else {
            // その他の床汚れには万能クリーナーも追加
            products = [
                ...window.BESTSELLER_PRODUCTS.floor_cleaners.slice(0, 2),
                window.BESTSELLER_PRODUCTS.scale_removers[3], // ウタマロクリーナー
                window.BESTSELLER_PRODUCTS.cleaning_tools[2] // スポンジ
            ];
        }
    } else if (location === 'laundry' || dirtType.includes('洗濯')) {
        // 洗濯機の場合は専用クリーナーとカビ取り剤
        products = [
            {
                asin: "B07HQJKMNP",
                name: "洗たく槽カビキラー 塩素系 550g",
                imageId: "71WASH1MNOXL",
                price: "¥298",
                rating: 4.4,
                reviews: 5678,
                rank: 1,
                emoji: "🌀",
                badge: "🥇 洗濯槽No.1",
                url: "https://www.amazon.co.jp/dp/B07HQJKMNP?tag=asdfghj12-22"
            },
            window.BESTSELLER_PRODUCTS.bathroom_mold[0], // カビキラー
            window.BESTSELLER_PRODUCTS.cleaning_tools[0], // ゴム手袋
            window.BESTSELLER_PRODUCTS.cleaning_tools[3] // スポンジ
        ];
    } else if (location === 'aircon' || dirtType.includes('エアコン')) {
        // エアコンの場合は専用クリーナー
        products = [
            {
                asin: "B07D7P3MNP",
                name: "エアコン洗浄スプレー 無香料 420ml×2本",
                imageId: "81AIR01MNOXL",
                price: "¥698",
                rating: 4.2,
                reviews: 2345,
                rank: 1,
                emoji: "❄️",
                badge: "🥇 エアコンNo.1",
                url: "https://www.amazon.co.jp/dp/B07D7P3MNP?tag=asdfghj12-22"
            },
            window.BESTSELLER_PRODUCTS.cleaning_tools[0], // ゴム手袋
            window.BESTSELLER_PRODUCTS.floor_cleaners[3], // メラミンスポンジ
            {
                asin: "B01M0Q84R3",
                name: "エアコンフィルター 抗菌・消臭タイプ",
                imageId: "71FILT1MNOXL",
                price: "¥1,280",
                rating: 4.3,
                reviews: 1234,
                rank: 2,
                emoji: "🌬️",
                badge: "⭐ 予防効果",
                url: "https://www.amazon.co.jp/dp/B01M0Q84R3?tag=asdfghj12-22"
            }
        ];
    } else {
        // デフォルトは掃除道具
        products = window.BESTSELLER_PRODUCTS.cleaning_tools;
    }
    
    // 売れ筋TOP4を返す（重複を除去）
    const uniqueProducts = [];
    const seenAsins = new Set();
    
    for (const product of products) {
        if (!seenAsins.has(product.asin)) {
            uniqueProducts.push(product);
            seenAsins.add(product.asin);
        }
    }
    
    return uniqueProducts.slice(0, 4);
};